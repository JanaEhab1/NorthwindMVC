@model NorthwindMVC.Models.Category
@{
    Layout = null;
}
<h2>Delete</h2>

<p>Are you sure you want to delete <strong>@Model.CategoryName</strong>?</p>

<form id="deleteForm">
    <input type="hidden" name="CategoryID" value="@Model.CategoryID" />
    <div id="deleteError" class="text-danger"></div>
    <button type="submit" class="btn btn-danger">Delete</button>
    <a href="@Url.Action("Index")" class="btn btn-primary">Back</a>
</form>

<script>

$("#deleteForm").submit(function (e) {
   

    $.ajax({
        url: '@Url.Action("DeleteConfirmed", "Category")',
        type: "POST",
        data: $(this).serialize(),
        success: function (res) {
            if (res.success) {
            
                $("#row-" + res.id).fadeOut(500, function () { $(this).remove(); });
        
                location.reload();
            } else {
                $("#deleteError").text(res.message);
            }
        },
        error: function () {
            $("#deleteError").text("Something went wrong.");
        }
    });
});
</script>


